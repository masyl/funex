/*! funex 2013-05-02 */
(function(t){"use strict";function e(t){return n(t.slice(0))}function n(t){var e=t.shift();return t.length>0&&(a.prototype=n(t)),new a(e)}function a(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function r(t){t=t.trim();var n=s(t);return function(t){t===void 0&&(t=[{}]),"Array"!==t.constructor.name&&(t=[t]);var a=[e(t)];return o(n,a)}}function o(t,e){var n,a,r={state:u,s0:u,context:e,stack:[[e[0]]],value:u,valueParent:e[0],tokens:t,tokenStr:u,statementOutputs:[],parsedStr:"",callee:u,i:u};for(r.stack[0].d=!1,n=0;t.length>n;n++)r.s0=r.stack[0],r.token=t[n],r.tokenStr=r.token[0],r.state=r.token[1],r.i=n,r.parsedStr+=r.tokenStr,a=v[r.state],a(r);return r.s0=r.stack[0],r.s0.d&&r.statementOutputs.unshift(r.value),r.statementOutputs.length?r.statementOutputs[0]:u}function s(t){var e=[],n={braces:0,chr:null,token:"",exp:t,state:"default",newState:null,i:0};if("''"===n.exp)return[["","str"]];if('""'===n.exp)return[["","str2"]];for(n.i=0;n.i<n.exp.length;n.i++)n.chr=n.exp[n.i],n.newState=null,g[n.state](n),n.newState?(n.token.length&&e.push([n.token,n.state]),n.state=n.newState,n.token="",""!==n.chr&&n.i--):n.token=n.token+n.chr;return n.token.length&&e.push([n.token,n.state]),e}var u=void 0,c="function",l="Illegal call : ",i="Syntax error : ",f="1234567890-",h=" \n	",d=f+".",p="abcdefghijklmnopqrstuvwxyz",k=p+p.toUpperCase()+"_$",S=k+f,w={"{":"json","(":"callOpen",")":"callClose","[":"arrayOpen","]":"arrayClose",".":"dot",",":"argsSeparator"," ":"whitespace","\n":"whitespace","	":"whitespace","'":"str",'"':"str2",";":"statementSeparator"},v={"default":function(t){throw i+t.parsedStr},callOpen:function(t){if(t.s0[0]===t.context[0])throw i+l+t.parsedStr;t.s0.d=!0;var e=[t.context[0]];e._=!0,e.c=t.value,e.cP=t.valueParent,e.d=!1,t.stack.unshift(e),t.value=u,t.valueParent=context[0]},callClose:function(t){var e=t.stack.shift();if(t.callee=e.c,!e._)throw i+l+t.parsedStr;if(typeof t.callee!==c)throw"Type error: "+typeof t.callee+" is not a "+c+" : "+t.parsedStr;t.stack[0][0]=t.callee.apply(e.cP,e.reverse()),t.value=t.stack[0][0],t.s0=t.stack[0],t.s0.d=!0},arrayOpen:function(t){t.s0.d=!0,t.stack.unshift([t.context[0]]),t.value=u,t.valueParent=t.context[0]},arrayClose:function(t){if(t.value=t.stack.shift(),t.s0=t.stack[0],t.s0.d=!0,t.s0[0]===t.context[0])throw i+l+t.parsedStr;if(t.s0[0]===u)throw"Cannot read property "+t.tokens[t.i-1][0]+" of undefined : "+t.parsedStr;t.value=t.s0[0][t.value[0]],t.s0[0]=t.value},dot:function(t){t.s0.d=!0,t.valueParent=t.value,t.value=u},argsSeparator:function(t){if(t.s0.d=!0,!t.s0._)throw i+t.parsedStr;t.value=u,t.valueParent=t.context[0],t.s0[0]===t.context[0]&&(t.s0[0]=t.undef),t.s0.unshift(t.context[0])},str:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},str2:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},json:function(t){t.s0.d=!0,t.s0[0]=t.value=JSON.parse(t.tokenStr)},numeric:function(t){t.s0.d=!0,t.s0[0]=t.value=parseFloat(t.tokenStr)},name:function(t){if(t.s0.d=!0,t.s0[0]===u)throw"Cannot read property '"+t.tokenStr+"' of undefined : "+t.parsedStr;t.value=t.s0[0][t.tokenStr],t.s0[0]=t.value},statementSeparator:function(t){if(t.s0._)throw i+parsedStr;t.s0.d&&t.statementOutputs.unshift(t.value),t.s0.d=!1,t.s0[0]=t.context[0],t.valueParent=u,t.value=u},whitespace:function(){}},g={"default":function(t){var e=w[t.chr];e!==u&&(t.newState=e),f.indexOf(t.chr)+1?t.newState="numeric":k.indexOf(t.chr)+1&&(t.newState="name")},callOpen:function(t){("("!=t.chr||1==t.token.length)&&(t.newState="default")},callClose:function(t){(")"!=t.chr||1==t.token.length)&&(t.newState="default")},arrayOpen:function(t){("["!=t.chr||1==t.token.length)&&(t.newState="default")},arrayClose:function(t){("]"!=t.chr||1==t.token.length)&&(t.newState="default")},statementSeparator:function(t){(";"!=t.chr||1==t.token.length)&&(t.newState="default")},dot:function(t){("."!=t.chr||1==t.token.length)&&(t.newState="default")},argsSeparator:function(t){(","!=t.chr||1==t.token.length)&&(t.newState="default")},whitespace:function(t){0>h.indexOf(t.chr)&&(t.newState="default")},str:function(t){"'"==t.chr&&((t.token.length>1||"'"===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=u,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="default",t.chr="",t.token=t.token.substring(0)+"'"))},str2:function(t){'"'==t.chr&&((t.token.length>1||'"'===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=u,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="default",t.token=t.token.substring(0)+'"',t.chr=""))},json:function(t){"{"==t.chr&&t.braces++,"}"==t.chr&&t.braces--,0===t.braces&&(t.newState="default",t.token+=t.chr,t.i++)},numeric:function(t){0>d.indexOf(t.chr)&&(t.newState="default")},name:function(t){0>S.indexOf(t.chr)&&(t.newState="default")}};"object"==typeof module&&"undefined"==typeof window&&(module.exports=r),"object"==typeof window&&t===window&&(window.funex=r)})(this);