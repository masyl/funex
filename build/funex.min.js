/*! funex 2013-05-02 */
(function(t){"use strict";function e(t){return n(t.slice(0))}function n(t){var e=t.shift();return t.length>0&&(r.prototype=n(t)),new r(e)}function r(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function a(t){t=t.trim();var n=u(t);return function(t){t===void 0&&(t=[{}]),"Array"!==t.constructor.name&&(t=[t]);var r=[e(t)];return s(n,r)}}function s(t,e){var n,r,a={state:o,s0:o,context:e,stack:[[e[0]]],value:o,valueParent:e[0],tokens:t,tokenStr:o,statementOutputs:[],parsedStr:"",callee:o,i:o};for(a.stack[0].d=!1,n=0;a.tokens.length>n;n++)a.s0=a.stack[0],a.token=t[n],a.tokenStr=a.token[0],a.state=a.token[1],a.i=n,a.parsedStr+=a.tokenStr,r=S[a.state],r||console.log("-------------",a.state),r(a);return a.s0=a.stack[0],a.s0.d&&a.statementOutputs.unshift(a.value),a.statementOutputs.length?a.statementOutputs[0]:o}function u(t){var e,n,r,a,s,u=[],i="",l="default",f={braces:0};if("''"===t)return u.push(["","str"]),u;if('""'===t)return u.push(["","str2"]),u;for(e=0;t.length>e;e++)n=t[e],r=o,a=w[l],s=a(f,n,i,t,e),s&&s.length>0&&(r=s[0],s.length>1&&(n=s[1],s.length>2&&(i=s[2]))),r?(i.length&&u.push([i,l]),l=r,i="",""!==n&&e--):i+=n;return i.length&&u.push([i,l]),u}var o=void 0,i="function",l="Illegal call : ",f="Syntax error : ",c="1234567890-",d=" \n	",p=c+".",v="abcdefghijklmnopqrstuvwxyz",h=v+v.toUpperCase()+"_$",g=h+c,k={"{":"json","(":"callOpen",")":"callClose","[":"arrayOpen","]":"arrayClose",".":"dot",",":"argsSeparator"," ":"whitespace","\n":"whitespace","	":"whitespace","'":"str",'"':"str2",";":"statementSeparator"},S={"default":function(t){throw f+t.parsedStr},callOpen:function(t){if(t.s0[0]===t.context[0])throw f+l+t.parsedStr;t.s0.d=!0;var e=[t.context[0]];e._=!0,e.c=t.value,e.cP=t.valueParent,e.d=!1,t.stack.unshift(e),t.value=o,t.valueParent=context[0]},callClose:function(t){var e=t.stack.shift();if(t.callee=e.c,!e._)throw f+l+t.parsedStr;if(typeof t.callee!==i)throw"Type error: "+typeof t.callee+" is not a "+i+" : "+t.parsedStr;t.stack[0][0]=t.callee.apply(e.cP,e.reverse()),t.value=t.stack[0][0],t.s0=t.stack[0],t.s0.d=!0},arrayOpen:function(t){t.s0.d=!0,t.stack.unshift([t.context[0]]),t.value=o,t.valueParent=t.context[0]},arrayClose:function(t){if(t.value=t.stack.shift(),t.s0=t.stack[0],t.s0.d=!0,t.s0[0]===t.context[0])throw f+l+t.parsedStr;if(t.s0[0]===o)throw"Cannot read property "+t.tokens[t.i-1][0]+" of undefined : "+t.parsedStr;t.value=t.s0[0][t.value[0]],t.s0[0]=t.value},dot:function(t){t.s0.d=!0,t.valueParent=t.value,t.value=o},argsSeparator:function(t){if(t.s0.d=!0,!t.s0._)throw f+t.parsedStr;t.value=o,t.valueParent=t.context[0],t.s0[0]===t.context[0]&&(t.s0[0]=t.undef),t.s0.unshift(t.context[0])},str:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},str2:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},json:function(t){t.s0.d=!0,t.s0[0]=t.value=JSON.parse(t.tokenStr)},numeric:function(t){t.s0.d=!0,t.s0[0]=t.value=parseFloat(t.tokenStr)},name:function(t){if(t.s0.d=!0,t.s0[0]===o)throw"Cannot read property '"+t.tokenStr+"' of undefined : "+t.parsedStr;t.value=t.s0[0][t.tokenStr],t.s0[0]=t.value},statementSeparator:function(t){if(t.s0._)throw f+parsedStr;t.s0.d&&t.statementOutputs.unshift(t.value),t.s0.d=!1,t.s0[0]=t.context[0],t.valueParent=o,t.value=o},whitespace:function(){}},w={"default":function(t,e){var n=k[e];return n!==o?[n]:(c.indexOf(e)+1?n="numeric":h.indexOf(e)+1&&(n="name"),[n])},callOpen:function(t,e,n){return"("!=e||1==n.length?["default"]:void 0},callClose:function(t,e,n){return")"!=e||1==n.length?["default"]:void 0},arrayOpen:function(t,e,n){return"["!=e||1==n.length?["default"]:void 0},arrayClose:function(t,e,n){return"]"!=e||1==n.length?["default"]:void 0},statementSeparator:function(t,e,n){return";"!=e||1==n.length?["default"]:void 0},dot:function(t,e,n){return"."!=e||1==n.length?["default"]:void 0},argsSeparator:function(t,e,n){return","!=e||1==n.length?["default"]:void 0},whitespace:function(t,e){return 0>d.indexOf(e)?["default"]:void 0},str:function(t,e,n,r,a){var s=e,u=n;if("'"==e){if((n.length>1||"'"===n)&&"\\"===r[a-1])return u=n.substring(0,n.length-1),[o,s,u];if(n.length>1)return u=n.substring(0)+"'",s="",["default",s,u]}},str2:function(t,e,n,r,a){var s=e,u=n;if('"'==e){if((n.length>1||'"'===n)&&"\\"===r[a-1])return u=n.substring(0,n.length-1),[o,s,u];if(n.length>1)return u=n.substring(0)+'"',s="",["default",s,u]}},json:function(t,e,n,r,a){return"{"==e&&t.braces++,"}"==e&&t.braces--,0===t.braces?["default","",n+e,a+1]:void 0},numeric:function(t,e){return 0>p.indexOf(e)?["default"]:void 0},name:function(t,e){return 0>g.indexOf(e)?["default"]:void 0}};"object"==typeof module&&"undefined"==typeof window&&(module.exports=a),"object"==typeof window&&t===window&&(window.funex=a)})(this);