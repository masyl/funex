/*! funex 2013-05-02 */
(function(t){"use strict";function e(t){return n(t.slice(0))}function n(t){var e=t.shift();return t.length>0&&(a.prototype=n(t)),new a(e)}function a(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function r(t){return o.bind(c(t.trim()))}function o(t){return t===void 0&&(t=[{}]),"Array"!==t.constructor.name&&(t=[t]),s(this,[e(t)])}function s(t,e){var n,a={state:u,s0:u,context:e,stack:[[e[0]]],value:u,valueParent:e[0],tokens:t,tokenStr:u,statementOutputs:[],parsedStr:"",callee:u,i:0};for(a.stack[0].d=!1;a.i<t.length;a.i++)a.s0=a.stack[0],a.token=t[a.i],a.tokenStr=a.token[0],a.state=a.token[1],a.parsedStr+=a.tokenStr,n=g[a.state],n(a);return a.s0=a.stack[0],a.s0.d&&a.statementOutputs.unshift(a.value),a.statementOutputs.length?a.statementOutputs[0]:u}function c(t){for(var e=[],n={braces:0,chr:null,token:"",exp:t,state:"def",newState:null,i:0};n.i<n.exp.length;n.i++)n.chr=n.exp[n.i],n.newState=null,x[n.state](n),n.newState?(n.token.length&&e.push([n.token,n.state]),n.state=n.newState,n.token="",""!==n.chr&&n.i--):n.token=n.token+n.chr;return n.token.length&&e.push([n.token,n.state]),e}var u=void 0,i="function",l="Illegal call : ",f="Syntax error : ",h="1234567890-",d=" \n	",k=h+".",p="abcdefghijklmnopqrstuvwxyz",S=p+p.toUpperCase()+"_$",w=S+h,v={"{":"json","(":"callOpen",")":"callClose","[":"arrayOpen","]":"arrayClose",".":"dot",",":"argsSeparator"," ":"whitespace","\n":"whitespace","	":"whitespace","'":"str",'"':"str2",";":"statementSeparator"},g={def:function(t){throw f+t.parsedStr},callOpen:function(t){if(t.s0[0]===t.context[0])throw f+l+t.parsedStr;t.s0.d=!0;var e=[t.context[0]];e._=!0,e.c=t.value,e.cP=t.valueParent,e.d=!1,t.stack.unshift(e),t.value=u,t.valueParent=context[0]},callClose:function(t){var e=t.stack.shift();if(t.callee=e.c,!e._)throw f+l+t.parsedStr;if(typeof t.callee!==i)throw"Type error: "+typeof t.callee+" is not a "+i+" : "+t.parsedStr;t.stack[0][0]=t.callee.apply(e.cP,e.reverse()),t.value=t.stack[0][0],t.s0=t.stack[0],t.s0.d=!0},arrayOpen:function(t){t.s0.d=!0,t.stack.unshift([t.context[0]]),t.value=u,t.valueParent=t.context[0]},arrayClose:function(t){if(t.value=t.stack.shift(),t.s0=t.stack[0],t.s0.d=!0,t.s0[0]===t.context[0])throw f+l+t.parsedStr;if(t.s0[0]===u)throw"Cannot read property "+t.tokens[t.i-1][0]+" of undefined : "+t.parsedStr;t.value=t.s0[0][t.value[0]],t.s0[0]=t.value},dot:function(t){t.s0.d=!0,t.valueParent=t.value,t.value=u},argsSeparator:function(t){if(t.s0.d=!0,!t.s0._)throw f+t.parsedStr;t.value=u,t.valueParent=t.context[0],t.s0[0]===t.context[0]&&(t.s0[0]=t.undef),t.s0.unshift(t.context[0])},str:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},str2:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},json:function(t){t.s0.d=!0,t.s0[0]=t.value=JSON.parse(t.tokenStr)},numeric:function(t){t.s0.d=!0,t.s0[0]=t.value=parseFloat(t.tokenStr)},name:function(t){if(t.s0.d=!0,t.s0[0]===u)throw"Cannot read property '"+t.tokenStr+"' of undefined : "+t.parsedStr;t.value=t.s0[0][t.tokenStr],t.s0[0]=t.value},statementSeparator:function(t){if(t.s0._)throw f+parsedStr;t.s0.d&&t.statementOutputs.unshift(t.value),t.s0.d=!1,t.s0[0]=t.context[0],t.valueParent=u,t.value=u},whitespace:function(){}},x={def:function(t){var e=v[t.chr];e!==u&&(t.newState=e),h.indexOf(t.chr)+1?t.newState="numeric":S.indexOf(t.chr)+1&&(t.newState="name")},callOpen:function(t){("("!=t.chr||1==t.token.length)&&(t.newState="def")},callClose:function(t){(")"!=t.chr||1==t.token.length)&&(t.newState="def")},arrayOpen:function(t){("["!=t.chr||1==t.token.length)&&(t.newState="def")},arrayClose:function(t){("]"!=t.chr||1==t.token.length)&&(t.newState="def")},statementSeparator:function(t){(";"!=t.chr||1==t.token.length)&&(t.newState="def")},dot:function(t){("."!=t.chr||1==t.token.length)&&(t.newState="def")},argsSeparator:function(t){(","!=t.chr||1==t.token.length)&&(t.newState="def")},whitespace:function(t){0>d.indexOf(t.chr)&&(t.newState="def")},str:function(t){"'"==t.chr&&((t.token.length>1||"'"===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=u,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="def",t.chr="",t.token=t.token.substring(0)+"'"))},str2:function(t){'"'==t.chr&&((t.token.length>1||'"'===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=u,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="def",t.token=t.token.substring(0)+'"',t.chr=""))},json:function(t){"{"==t.chr&&t.braces++,"}"==t.chr&&t.braces--,0===t.braces&&(t.newState="def",t.token+=t.chr,t.i++)},numeric:function(t){0>k.indexOf(t.chr)&&(t.newState="def")},name:function(t){0>w.indexOf(t.chr)&&(t.newState="def")}};"object"==typeof module&&"undefined"==typeof window&&(module.exports=r),"object"==typeof window&&t===window&&(window.funex=r)})(this);