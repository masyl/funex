/*! funex 2013-10-25 */
!function(a){"use strict";function b(a){return c(a.slice(0))}function c(a){var b=a.shift();return a.length>0&&(d.prototype=c(a)),new d(b)}function d(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function e(a,b){var c={state:i,s0:i,context:b,stack:[[b[0]]],v:i,vP:b[0],tokens:a,tokenStr:i,statementOutputs:[],parsedStr:"",callee:i,i:0};for(c.stack[0].d=!1;c.i<a.length;c.i++)c.s0=c.stack[0],c.t=a[c.i],c.tokenStr=c.t[0],c.state=c.t[1],c.parsedStr+=c.tokenStr,v[c.state](c);return c.s0=c.stack[0],c.s0.d&&c.statementOutputs.unshift(c.v),c.statementOutputs.length?c.statementOutputs[0]:i}function f(a){for(var b=[],c={braces:0,c:"",t:"",exp:a,state:"def",newState:null,i:0};c.i<c.exp.length;c.i++)g(c,b);return c.t.length&&b.push([c.t,c.state]),b}function g(a,b){a.c=a.exp[a.i],a.newState=null,w[a.state](a),a.newState?(a.t&&b.push([a.t,a.state]),a.state=a.newState,a.t="",a.i--):a.t+=a.c}function h(a){return"undefined"==typeof a&&(a=[{}]),"Array"!==a.constructor.name&&(a=[a]),e(this,[b(a)])}var i=void 0,j="function",k="Illegal call : ",l="Syntax error : ",m="Cannot read property ",n=" of undefined : ",o="1234567890-",p=" \n	",q=o+".",r="abcdefghijklmnopqrstuvwxyz",s=r+r.toUpperCase()+"_$",t=s+o,u={"{":"json","(":"call+",")":"call-","[":"arr+","]":"arr-",".":"dot",",":"arg"," ":"w","\n":"w","	":"w","'":"str",'"':"str2",";":"sep"},v={def:function(a){throw l+a.parsedStr},"call+":function(a){if(a.s0[0]===a.context[0])throw l+k+a.parsedStr;a.s0.d=!0;var b=[a.context[0]];b._=!0,b.c=a.v,b.cP=a.vP,b.d=!1,a.stack.unshift(b),a.v=i,a.vP=a.context[0]},"call-":function(a){var b=a.stack.shift();if(a.callee=b.c,!b._)throw l+k+a.parsedStr;if(typeof a.callee!==j)throw"Type error: "+typeof a.callee+" is not a "+j+" : "+a.parsedStr;a.stack[0][0]=a.callee.apply(b.cP,b.reverse()),a.v=a.stack[0][0],a.s0=a.stack[0],a.s0.d=!0},"arr+":function(a){a.s0.d=!0,a.stack.unshift([a.context[0]]),a.v=i,a.vP=a.context[0]},"arr-":function(a){if(a.v=a.stack.shift(),a.s0=a.stack[0],a.s0.d=!0,a.s0[0]===a.context[0])throw l+k+a.parsedStr;if(a.s0[0]===i)throw m+a.tokens[a.i-1][0]+n+a.parsedStr;a.v=a.s0[0][a.v[0]],a.s0[0]=a.v},dot:function(a){a.s0.d=!0,a.vP=a.v,a.v=i},arg:function(a){if(a.s0.d=!0,!a.s0._)throw l+a.parsedStr;a.v=i,a.vP=a.context[0],a.s0[0]===a.context[0]&&(a.s0[0]=a.undef),a.s0.unshift(a.context[0])},str:function(a){a.s0.d=!0,a.s0[0]=a.v=a.tokenStr.substring(1,a.tokenStr.length-1)},str2:function(a){a.s0.d=!0,a.s0[0]=a.v=a.tokenStr.substring(1,a.tokenStr.length-1)},json:function(a){a.s0.d=!0,a.s0[0]=a.v=JSON.parse(a.tokenStr)},num:function(a){a.s0.d=!0,a.s0[0]=a.v=parseFloat(a.tokenStr)},name:function(a){if(a.s0.d=!0,a.s0[0]===i)throw m+"'"+a.tokenStr+"'"+n+a.parsedStr;a.v=a.s0[0][a.tokenStr],a.s0[0]=a.v},sep:function(a){if(a.s0._)throw l+a.parsedStr;a.s0.d&&a.statementOutputs.unshift(a.v),a.s0.d=!1,a.s0[0]=a.context[0],a.vP=i,a.v=i},w:function(){}},w={def:function(a){var b=u[a.c];b!==i&&(a.newState=b),o.indexOf(a.c)+1?a.newState="num":s.indexOf(a.c)+1&&(a.newState="name")},"call+":function(a){("("!==a.c||1===a.t.length)&&(a.newState="def")},"call-":function(a){(")"!==a.c||1===a.t.length)&&(a.newState="def")},"arr+":function(a){("["!==a.c||1===a.t.length)&&(a.newState="def")},"arr-":function(a){("]"!==a.c||1===a.t.length)&&(a.newState="def")},sep:function(a){(";"!==a.c||1===a.t.length)&&(a.newState="def")},dot:function(a){("."!==a.c||1===a.t.length)&&(a.newState="def")},arg:function(a){(","!==a.c||1===a.t.length)&&(a.newState="def")},w:function(a){p.indexOf(a.c)<0&&(a.newState="def")},str:function(a){"'"===a.c&&((a.t.length>1||"'"===a.t)&&"\\"===a.exp[a.i-1]?(a.newState=i,a.t=a.t.substring(0,a.t.length-1)):a.t.length>1&&(a.newState="def",a.c="",a.i++,a.t=a.t.substring(0)+"'"))},str2:function(a){'"'===a.c&&((a.t.length>1||'"'===a.t)&&"\\"===a.exp[a.i-1]?(a.newState=i,a.t=a.t.substring(0,a.t.length-1)):a.t.length>1&&(a.newState="def",a.t=a.t.substring(0)+'"',a.c="",a.i++))},json:function(a){"{"===a.c&&a.braces++,"}"===a.c&&a.braces--,0===a.braces&&(a.newState="def",a.t+=a.c,a.i++)},num:function(a){q.indexOf(a.c)<0&&(a.newState="def")},name:function(a){t.indexOf(a.c)<0&&(a.newState="def")}};a.compile=function(a){return h.bind(f(a.trim()))}}(this);