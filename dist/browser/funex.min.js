/*! funex 2013-05-06 */
(function(t){"use strict";function n(t){return e(t.slice(0))}function e(t){var n=t.shift();return t.length>0&&(s.prototype=e(t)),new s(n)}function s(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}function r(t,n){var e={state:f,s0:f,context:n,stack:[[n[0]]],v:f,vP:n[0],tokens:t,tokenStr:f,statementOutputs:[],parsedStr:"",callee:f,i:0};for(e.stack[0].d=!1;e.i<t.length;e.i++)e.s0=e.stack[0],e.t=t[e.i],e.tokenStr=e.t[0],e.state=e.t[1],e.parsedStr+=e.tokenStr,b[e.state](e);return e.s0=e.stack[0],e.s0.d&&e.statementOutputs.unshift(e.v),e.statementOutputs.length?e.statementOutputs[0]:f}function c(t){for(var n=[],e={braces:0,c:"",t:"",exp:t,state:"def",newState:null,i:0};e.i<e.exp.length;e.i++)a(e,n);return e.t.length&&n.push([e.t,e.state]),n}function a(t,n){t.c=t.exp[t.i],t.newState=null,O[t.state](t),t.newState?(t.t&&n.push([t.t,t.state]),t.state=t.newState,t.t="",t.i--):t.t+=t.c}function o(t){return t===void 0&&(t=[{}]),"Array"!==t.constructor.name&&(t=[t]),r(this,[n(t)])}function i(t){return o.bind(c(t.trim()))}var f=void 0,u="function",d="Illegal call : ",l="Syntax error : ",S="Cannot read property ",h=" of undefined : ",p="1234567890-",w=" \n	",v=p+".",g="abcdefghijklmnopqrstuvwxyz",k=g+g.toUpperCase()+"_$",x=k+p,m={"{":"json","(":"call+",")":"call-","[":"arr+","]":"arr-",".":"dot",",":"arg"," ":"w","\n":"w","	":"w","'":"str",'"':"str2",";":"sep"},b={def:function(t){throw l+t.parsedStr},"call+":function(t){if(t.s0[0]===t.context[0])throw l+d+t.parsedStr;t.s0.d=!0;var n=[t.context[0]];n._=!0,n.c=t.v,n.cP=t.vP,n.d=!1,t.stack.unshift(n),t.v=f,t.vP=t.context[0]},"call-":function(t){var n=t.stack.shift();if(t.callee=n.c,!n._)throw l+d+t.parsedStr;if(typeof t.callee!==u)throw"Type error: "+typeof t.callee+" is not a "+u+" : "+t.parsedStr;t.stack[0][0]=t.callee.apply(n.cP,n.reverse()),t.v=t.stack[0][0],t.s0=t.stack[0],t.s0.d=!0},"arr+":function(t){t.s0.d=!0,t.stack.unshift([t.context[0]]),t.v=f,t.vP=t.context[0]},"arr-":function(t){if(t.v=t.stack.shift(),t.s0=t.stack[0],t.s0.d=!0,t.s0[0]===t.context[0])throw l+d+t.parsedStr;if(t.s0[0]===f)throw S+t.tokens[t.i-1][0]+h+t.parsedStr;t.v=t.s0[0][t.v[0]],t.s0[0]=t.v},dot:function(t){t.s0.d=!0,t.vP=t.v,t.v=f},arg:function(t){if(t.s0.d=!0,!t.s0._)throw l+t.parsedStr;t.v=f,t.vP=t.context[0],t.s0[0]===t.context[0]&&(t.s0[0]=t.undef),t.s0.unshift(t.context[0])},str:function(t){t.s0.d=!0,t.s0[0]=t.v=t.tokenStr.substring(1,t.tokenStr.length-1)},str2:function(t){t.s0.d=!0,t.s0[0]=t.v=t.tokenStr.substring(1,t.tokenStr.length-1)},json:function(t){t.s0.d=!0,t.s0[0]=t.v=JSON.parse(t.tokenStr)},num:function(t){t.s0.d=!0,t.s0[0]=t.v=parseFloat(t.tokenStr)},name:function(t){if(t.s0.d=!0,t.s0[0]===f)throw S+"'"+t.tokenStr+"'"+h+t.parsedStr;t.v=t.s0[0][t.tokenStr],t.s0[0]=t.v},sep:function(t){if(t.s0._)throw l+t.parsedStr;t.s0.d&&t.statementOutputs.unshift(t.v),t.s0.d=!1,t.s0[0]=t.context[0],t.vP=f,t.v=f},w:function(){}},O={def:function(t){var n=m[t.c];n!==f&&(t.newState=n),p.indexOf(t.c)+1?t.newState="num":k.indexOf(t.c)+1&&(t.newState="name")},"call+":function(t){("("!==t.c||1===t.t.length)&&(t.newState="def")},"call-":function(t){(")"!==t.c||1===t.t.length)&&(t.newState="def")},"arr+":function(t){("["!==t.c||1===t.t.length)&&(t.newState="def")},"arr-":function(t){("]"!==t.c||1===t.t.length)&&(t.newState="def")},sep:function(t){(";"!==t.c||1===t.t.length)&&(t.newState="def")},dot:function(t){("."!==t.c||1===t.t.length)&&(t.newState="def")},arg:function(t){(","!==t.c||1===t.t.length)&&(t.newState="def")},w:function(t){0>w.indexOf(t.c)&&(t.newState="def")},str:function(t){"'"===t.c&&((t.t.length>1||"'"===t.t)&&"\\"===t.exp[t.i-1]?(t.newState=f,t.t=t.t.substring(0,t.t.length-1)):t.t.length>1&&(t.newState="def",t.c="",t.i++,t.t=t.t.substring(0)+"'"))},str2:function(t){'"'===t.c&&((t.t.length>1||'"'===t.t)&&"\\"===t.exp[t.i-1]?(t.newState=f,t.t=t.t.substring(0,t.t.length-1)):t.t.length>1&&(t.newState="def",t.t=t.t.substring(0)+'"',t.c="",t.i++))},json:function(t){"{"===t.c&&t.braces++,"}"===t.c&&t.braces--,0===t.braces&&(t.newState="def",t.t+=t.c,t.i++)},num:function(t){0>v.indexOf(t.c)&&(t.newState="def")},name:function(t){0>x.indexOf(t.c)&&(t.newState="def")}};t.funex=i})(window);