/*! funex 2013-05-05 */
(function(t){"use strict";function e(t){return n(t.slice(0))}function n(t){var e=t.shift();return t.length>0&&(a.prototype=n(t)),new a(e)}function a(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function r(t,e){var n={state:i,s0:i,context:e,stack:[[e[0]]],value:i,valueParent:e[0],tokens:t,tokenStr:i,statementOutputs:[],parsedStr:"",callee:i,i:0};for(n.stack[0].d=!1;n.i<t.length;n.i++)n.s0=n.stack[0],n.token=t[n.i],n.tokenStr=n.token[0],n.state=n.token[1],n.parsedStr+=n.tokenStr,x[n.state](n);return n.s0=n.stack[0],n.s0.d&&n.statementOutputs.unshift(n.value),n.statementOutputs.length?n.statementOutputs[0]:i}function o(t){for(var e=[],n={braces:0,chr:"",token:"",exp:t,state:"def",newState:null,i:0};n.i<n.exp.length;n.i++)s(n,e);return n.token.length&&e.push([n.token,n.state]),e}function s(t,e){t.chr=t.exp[t.i],t.newState=null,O[t.state](t),t.newState?(t.token&&e.push([t.token,t.state]),t.state=t.newState,t.token="",t.i--):t.token+=t.chr}function c(t){return t===void 0&&(t=[{}]),"Array"!==t.constructor.name&&(t=[t]),r(this,[e(t)])}function u(t){return c.bind(o(t.trim()))}var i=void 0,l="function",f="Illegal call : ",h="Syntax error : ",d="1234567890-",k=" \n	",p=d+".",S="abcdefghijklmnopqrstuvwxyz",w=S+S.toUpperCase()+"_$",v=w+d,g={"{":"json","(":"callOpen",")":"callClose","[":"arrayOpen","]":"arrayClose",".":"dot",",":"argsSeparator"," ":"whitespace","\n":"whitespace","	":"whitespace","'":"str",'"':"str2",";":"statementSeparator"},x={def:function(t){throw h+t.parsedStr},callOpen:function(t){if(t.s0[0]===t.context[0])throw h+f+t.parsedStr;t.s0.d=!0;var e=[t.context[0]];e._=!0,e.c=t.value,e.cP=t.valueParent,e.d=!1,t.stack.unshift(e),t.value=i,t.valueParent=t.context[0]},callClose:function(t){var e=t.stack.shift();if(t.callee=e.c,!e._)throw h+f+t.parsedStr;if(typeof t.callee!==l)throw"Type error: "+typeof t.callee+" is not a "+l+" : "+t.parsedStr;t.stack[0][0]=t.callee.apply(e.cP,e.reverse()),t.value=t.stack[0][0],t.s0=t.stack[0],t.s0.d=!0},arrayOpen:function(t){t.s0.d=!0,t.stack.unshift([t.context[0]]),t.value=i,t.valueParent=t.context[0]},arrayClose:function(t){if(t.value=t.stack.shift(),t.s0=t.stack[0],t.s0.d=!0,t.s0[0]===t.context[0])throw h+f+t.parsedStr;if(t.s0[0]===i)throw"Cannot read property "+t.tokens[t.i-1][0]+" of undefined : "+t.parsedStr;t.value=t.s0[0][t.value[0]],t.s0[0]=t.value},dot:function(t){t.s0.d=!0,t.valueParent=t.value,t.value=i},argsSeparator:function(t){if(t.s0.d=!0,!t.s0._)throw h+t.parsedStr;t.value=i,t.valueParent=t.context[0],t.s0[0]===t.context[0]&&(t.s0[0]=t.undef),t.s0.unshift(t.context[0])},str:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},str2:function(t){t.s0.d=!0,t.s0[0]=t.value=t.tokenStr.substring(1,t.tokenStr.length-1)},json:function(t){t.s0.d=!0,t.s0[0]=t.value=JSON.parse(t.tokenStr)},numeric:function(t){t.s0.d=!0,t.s0[0]=t.value=parseFloat(t.tokenStr)},name:function(t){if(t.s0.d=!0,t.s0[0]===i)throw"Cannot read property '"+t.tokenStr+"' of undefined : "+t.parsedStr;t.value=t.s0[0][t.tokenStr],t.s0[0]=t.value},statementSeparator:function(t){if(t.s0._)throw h+t.parsedStr;t.s0.d&&t.statementOutputs.unshift(t.value),t.s0.d=!1,t.s0[0]=t.context[0],t.valueParent=i,t.value=i},whitespace:function(){}},O={def:function(t){var e=g[t.chr];e!==i&&(t.newState=e),d.indexOf(t.chr)+1?t.newState="numeric":w.indexOf(t.chr)+1&&(t.newState="name")},callOpen:function(t){("("!==t.chr||1===t.token.length)&&(t.newState="def")},callClose:function(t){(")"!==t.chr||1===t.token.length)&&(t.newState="def")},arrayOpen:function(t){("["!==t.chr||1===t.token.length)&&(t.newState="def")},arrayClose:function(t){("]"!==t.chr||1===t.token.length)&&(t.newState="def")},statementSeparator:function(t){(";"!==t.chr||1===t.token.length)&&(t.newState="def")},dot:function(t){("."!==t.chr||1===t.token.length)&&(t.newState="def")},argsSeparator:function(t){(","!==t.chr||1===t.token.length)&&(t.newState="def")},whitespace:function(t){0>k.indexOf(t.chr)&&(t.newState="def")},str:function(t){"'"===t.chr&&((t.token.length>1||"'"===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=i,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="def",t.chr="",t.i++,t.token=t.token.substring(0)+"'"))},str2:function(t){'"'===t.chr&&((t.token.length>1||'"'===t.token)&&"\\"===t.exp[t.i-1]?(t.newState=i,t.token=t.token.substring(0,t.token.length-1)):t.token.length>1&&(t.newState="def",t.token=t.token.substring(0)+'"',t.chr="",t.i++))},json:function(t){"{"===t.chr&&t.braces++,"}"===t.chr&&t.braces--,0===t.braces&&(t.newState="def",t.token+=t.chr,t.i++)},numeric:function(t){0>p.indexOf(t.chr)&&(t.newState="def")},name:function(t){0>v.indexOf(t.chr)&&(t.newState="def")}};"function"==typeof t&&t.amd&&t("funex",function(){return u})})(define);